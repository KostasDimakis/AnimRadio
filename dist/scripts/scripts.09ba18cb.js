"use strict";angular.module("animRadioApp",["ngAnimate","ngTouch","ui.router"]).config(["$stateProvider","$urlRouterProvider",function(t,e){e.otherwise("/"),t.state("player",{url:"/",templateUrl:"views/player.html",controller:"PlayerCtrl as player"})}]),angular.module("animRadioApp").controller("PlayerCtrl",["audioPlayer","radio",function(t,e){this.current={artist:"",title:"",imgUrl:"",songUrl:""},this.upcoming={artist:"",title:"",imgUrl:"",songUrl:""},this.playing=!1,this.duration=0,this.time=0,e.next().then(e=>{this.current=e,t.src=e.songUrl,t.play(),this.playing=!0}),e.next().then(t=>{this.upcoming=t}),this.next=function(){this.current=this.upcoming,e.next().then(t=>{this.upcoming=t})},this.togglePlayPause=function(){this.playing?(t.pause(),this.playing=!this.playing):(t.play(),this.playing=!this.playing)}}]),angular.module("animRadioApp").service("audioPlayer",function(){return new Audio}),angular.module("animRadioApp").service("radio",function(){this._history=[],this._songs=fetch("../data.json").then(t=>{if(!t.ok){let e=t.status+": "+t.statusText;throw new Error(e)}return t.json()}).then(t=>{let e=[];return t.forEach(t=>{e.push({artist:t.artist,title:t.title,imgUrl:window.location.origin+t.imgUrl,songUrl:window.location.origin+t.songUrl})}),e}).catch(t=>{console.error("Oops something went wrong ",t)}),this.next=function(){return this._songs.then(t=>{if(0===t.length)return;let e=function(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t}(0,t.length-1);return this._history.push(e),t[e]})}}),angular.module("animRadioApp").run(["$templateCache",function(t){t.put("views/player.html",'<main style="background-image: url(\'{{player.current.imgUrl}}\')"> <section class="current p-2 flexbox flexbox--column"> <p class="title flexbox__item--horizontally-centered">{{player.current.title}} - {{player.current.artist}}</p> <progress class="progress flexbox__item--horizontally-centered" value="70" max="100">70 %</progress> <div class="timers flexbox justify-between flexbox__item--horizontally-centered"> <span>{{player.time}}</span> <span>{{player.duration}}</span> </div> </section> <button class="play-pause" ng-click="player.togglePlayPause()"> <img ng ng-src="{{player.playing == true && \'images/pause.49711f45.svg\' || \'images/play-arrow.fb694d7c.svg\'}}" alt="Pause"> </button> <section class="upcoming p-2"> <h3 class="up-next">Up Next</h3> <div class="flexbox justify-between"> <div class="flexbox"> <img class="thumbnail" ng-src="{{player.upcoming.imgUrl}}" alt="{{player.upcoming.artist}}"> <div class="pr-1 pl-1"> <p class="title">{{player.upcoming.title}}</p> <p class="artist">{{player.upcoming.artist}}</p> </div> </div> <a ui-sref="player"><img width="64" height="64" ng-src="images/skip-next.07fb8920.svg" alt="Next"></a> </div> </section> </main>')}]);